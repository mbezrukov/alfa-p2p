= REST Cards

:doctype: book
:toc:
:sectanchors:
:sectlinks:
:toclevels: 4
:source-highlighter: highlightjs

[[Overview]]
Сервис предназначен для работы с объектом Cards.

*Параметры объекта*
|===
| Параметр | Тип | Описание

| id
| String
| ID карты

| direction
| String
| Карта списания или зачисления ('sender' - карты, с которых переводили, 'recipient' - карты, на которые переводили)

| color
| String
| Код цвета карты

| name
| String
| Название карты

| verification 
| String
| Статус верификации карты (S - 3DS, H - hold, N - not verify)

| active
| String
| Активная карта? (true/false)

| alfabank
| String
| Карта Альфа-Банка? (true/false)

| number
| String
| Номер карты

| expirationYear
| Integer
| Год окончания срока действия карты

| expirationMonth
| Integer
| Месяц окончания срока действия карты

| lastTransactionDateForSender
| Date
| Дата последнего перевода с карты

| lastTransactionDateForRecipient
| Date
| Дата последнего перевода на карту

| paymentSystem
| String
| Платежная система

3+ | Объект Account

| Balance
| Integer
| Account balance

3+ | Объект Currency

| Code
| String
| Код валюты

| Description
| String
| Название валюты

3+ | Объект Bank

| Id
| String
| ID банка

| latinName
| String
| Латинское название банка

| сyrillicName 
| String
| Кириллическое название банка

| countryCode
| String
| Код страны

| Color
| String
| Цвет банка

|===

*Пример объекта*
----
{
  "id": "1",
  "color": "#000002",
  "name": null,
  "direction": "sender",
  "verification": "S",
  "active": true,
  "alfabank": false,
  "number": "5154 **** 4025",
  "expirationYear": "15",
  "expirationMonth": "07",
  "lastTransactionDateForSender": "2015-12-15",
  "lastTransactionDateForRecipient": "2015-01-15",
  "paymentSystem": "MC",
  "account": {
    "balance": "15250.50"
    },
  "currency": {
    "code": "USD",
    "description": "Доллар США"
    },
  "bank": {
    "id": "12345679",
    "latinName": "Sberbank",
    "cyrillicName": "Сбербанк",
    "countryCode": "12",
    "Color": "#000008",
    }
}
----

[[overview-http-verbs]]
== Список методов

|===
| Метод | Описание

| `GET /cards`
| Получение списка карт клиента с параметрами

| `GET /cards/123`
| Получение параметров заданной карты

| `POST /cards`
| Сохранение новой карты в системе

| `PATCH /cards/123`
| Редактирование параметров карты в системе

|===

[[resources-card]]
== Карты

[[resources-card-access]]
=== Метод GET

* Получение списка всех карт клиента

==== Example request

include::{generated}/cards-get/request.asciidoc[]

==== Example response

include::{generated}/cards-get/response.asciidoc[]


* Получение списка карт в поле карты списания

Дано
  клиент находится на странице перевода
Когда
  клиент кликает в поле ввода карты списания
Тогда
  выпадает список карт: карты Альфа-Банка клиента и те, с которых он ранее делал переводы
       
==== Example request

include::{generated}/cards-get-sendercards/request.asciidoc[]

==== Example response

include::{generated}/cards-get-sendercards/response.asciidoc[]


* Получение списка карт в поле карты зачисления

Дано
  клиент находится на странице перевода
Когда
  клиент кликает в поле ввода карты зачисления
Тогда
  выпадает список карт: карты Альфа-Банка клиента и те, на которые он ранее делал переводы

==== Example request

include::{generated}/cards-get-recipientcards/request.asciidoc[]

==== Example response

include::{generated}/cards-get-recipientcards/response.asciidoc[]


* Получение параметров заданной карты

==== Example request

include::{generated}/cards-get-currentcard/request.asciidoc[]

==== Example response

include::{generated}/cards-get-currentcard/response.asciidoc[]


* Сохранение новой карты зачисления

Дано
  клиент выполнил перевод с новой картой
Когда
  операция прошла успешно
Тогда
  сохраняется новая карта

==== Example request

include::{generated}/cards-post/request.asciidoc[]

==== Example response

include::{generated}/cards-post/response.asciidoc[]


* Сохранение названия карты
Дано
  клиент кликает на псевдоссылку с названием карты
Когда
  вводит новое название карты
Тогда
  сохраняется новое название карты

==== Example request

include::{generated}/cards-patch-name/request.asciidoc[]

==== Example response

include::{generated}/cards-patch-name/response.asciidoc[]
